{"ast":null,"code":"import _asyncToGenerator from \"/var/www/project4.wesleyijams.com/front-end/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"regenerator-runtime/runtime.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from 'axios';\nexport default {\n  name: 'ProfileView',\n  data: function data() {\n    return {\n      items: [],\n      name: \"\",\n      city: \"\",\n      age: \"\",\n      photo: null,\n      addProfile: null,\n      profile: []\n    };\n  },\n  created: function created() {\n    this.getItems();\n    this.getInfo();\n  },\n  methods: {\n    fileChanged: function fileChanged(event) {\n      this.file = event.target.files[0];\n    },\n    getItems: function getItems() {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var response;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return axios.get(\"/api/items\");\n\n              case 3:\n                response = _context.sent;\n                _this.items = response.data;\n                return _context.abrupt(\"return\", true);\n\n              case 8:\n                _context.prev = 8;\n                _context.t0 = _context[\"catch\"](0);\n                console.log(_context.t0);\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 8]]);\n      }))();\n    },\n    uploadInfo: function uploadInfo() {\n      var _this2 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var formData, r3, r4;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                formData = new FormData();\n                formData.append('photo', _this2.file, _this2.file.name);\n                _context2.next = 5;\n                return axios.post('/api/picture', formData);\n\n              case 5:\n                r3 = _context2.sent;\n                _context2.next = 8;\n                return axios.post('/api/profile', {\n                  name: _this2.name,\n                  city: _this2.city,\n                  age: _this2.age,\n                  photo: r3.data.photo\n                });\n\n              case 8:\n                r4 = _context2.sent;\n\n                _this2.$forceUpdate();\n\n                _this2.addProfile = r4.data;\n\n                _this2.getInfo();\n\n                _context2.next = 17;\n                break;\n\n              case 14:\n                _context2.prev = 14;\n                _context2.t0 = _context2[\"catch\"](0);\n                console.log(_context2.t0);\n\n              case 17:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[0, 14]]);\n      }))();\n    },\n    getInfo: function getInfo() {\n      var _this3 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {\n        var response;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                _context3.next = 3;\n                return axios.get(\"/api/profile\");\n\n              case 3:\n                response = _context3.sent;\n                _this3.profile = response.data;\n                return _context3.abrupt(\"return\", true);\n\n              case 8:\n                _context3.prev = 8;\n                _context3.t0 = _context3[\"catch\"](0);\n                console.log(_context3.t0);\n\n              case 11:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[0, 8]]);\n      }))();\n    },\n    deleteProfile: function deleteProfile(profile) {\n      var _this4 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4() {\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n                _context4.next = 3;\n                return axios.delete(\"/api/profile/\" + profile[0]._id);\n\n              case 3:\n                _this4.getInfo();\n\n                return _context4.abrupt(\"return\", true);\n\n              case 7:\n                _context4.prev = 7;\n                _context4.t0 = _context4[\"catch\"](0);\n                console.log(_context4.t0);\n\n              case 10:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, null, [[0, 7]]);\n      }))();\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA;AACA;AACAA,qBADA;AAEAC,MAFA,kBAEA;AACA;AACAC,eADA;AAEAF,cAFA;AAGAG,cAHA;AAIAC,aAJA;AAKAC,iBALA;AAMAC,sBANA;AAOAC;AAPA;AASA,GAZA;AAaAC,SAbA,qBAaA;AACA;AACA;AACA,GAhBA;AAiBAC;AACAC,eADA,uBACAC,KADA,EACA;AACA;AACA,KAHA;AAIAC,YAJA,sBAIA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAEAC,uBAFA;;AAAA;AAEAC,wBAFA;AAGA;AAHA,iDAIA,IAJA;;AAAA;AAAA;AAAA;AAMAC;;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA,KAZA;AAaAC,cAbA,wBAaA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEAC,wBAFA,GAEA,cAFA;AAGAA;AAHA;AAAA,uBAIAJ,oCAJA;;AAAA;AAIAK,kBAJA;AAAA;AAAA,uBAKAL;AACAb,mCADA;AAEAG,mCAFA;AAGAC,iCAHA;AAIAC;AAJA,kBALA;;AAAA;AAKAc,kBALA;;AAWA;;AACA;;AACA;;AAbA;AAAA;;AAAA;AAAA;AAAA;AAeAJ;;AAfA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAiBA,KA9BA;AA+BAK,WA/BA,qBA+BA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAEAP,yBAFA;;AAAA;AAEAC,wBAFA;AAGA;AAHA,kDAIA,IAJA;;AAAA;AAAA;AAAA;AAMAC;;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA,KAvCA;AAwCAM,iBAxCA,yBAwCAd,OAxCA,EAwCA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAEAM,8CAFA;;AAAA;AAGA;;AAHA,kDAIA,IAJA;;AAAA;AAAA;AAAA;AAMAE;;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AAhDA;AAjBA","names":["name","data","items","city","age","photo","addProfile","profile","created","methods","fileChanged","event","getItems","axios","response","console","uploadInfo","formData","r3","r4","getInfo","deleteProfile"],"sourceRoot":"src/views","sources":["Profile.vue"],"sourcesContent":["<template>\n    <div class=\"profile\">\n        <h1>Your Profile</h1>\n        <div class=\"Personal Information\">\n            <div class=\"personalForm\" v-if=\"profile.length===0\">\n                <h2 class=\"label\">Tell Us About Yourself</h2>\n                <div class=\"personalEntry\">\n                    <input class=\"shortEntry\" v-model=\"name\" placeholder=\"Name\" />\n                    <p></p>\n                    <input class=\"shortEntry\" v-model=\"city\" placeholder=\"City\" />\n                    <p></p>\n                    <input class=\"shortEntry\" v-model=\"age\" placeholder=\"Age\" />\n                    <p></p>\n                </div>\n                <p class=\"pictureLabel\"><strong>Upload Your Picture</strong></p>\n                <input class=\"fileSelect\" type=\"file\" name=\"photo\" @change=\"fileChanged\" />\n                <button class=\"submit\" @click=\"uploadInfo\">Submit Personal Information</button>\n            </div>\n        </div>\n        <div class=\"personalProfile\" v-if=\"profile.length > 0\">\n            <img class=\"profilePic\" :src=\"profile[0].photo\" />\n            <div class=\"personalInfo\">\n                <p>Name: {{profile[0].name}}</p>\n                <p>City: {{profile[0].city}}</p>\n                <p>Age: {{profile[0].age}}</p>\n                <button @click=\"deleteProfile(profile)\">Delete</button>\n            </div>\n        </div>\n        <h1>Your Posts</h1>\n        <section class=\"posts\">\n            <h3 class=\"empty\" v-if=\"items.length === 0\">You have no posts</h3>\n            <div class=\"post\" v-for=\"item in items\" :key=\"item.id\">\n                <h2>{{item.title}}</h2>\n                <img :src=\"item.path\" />\n                <p>{{item.text}}</p>\n            </div>\n        </section>\n        </div>\n</template>\n\n<script>\n    import axios from 'axios';\n    export default {\n        name: 'ProfileView',\n        data() {\n            return {\n                items: [],\n                name: \"\",\n                city: \"\",\n                age: \"\",\n                photo: null,\n                addProfile: null,\n                profile: [],\n            }\n        },\n        created() {\n            this.getItems();\n            this.getInfo();\n        },\n        methods: {\n            fileChanged(event) {\n                this.file = event.target.files[0]\n            },\n            async getItems() {\n                try {\n                    let response = await axios.get(\"/api/items\");\n                    this.items = response.data;\n                    return true;\n                } catch (error) {\n                    console.log(error);\n                }\n            },\n            async uploadInfo() {\n                try {\n                    const formData = new FormData();\n                    formData.append('photo', this.file, this.file.name)\n                    let r3 = await axios.post('/api/picture', formData);\n                    let r4 = await axios.post('/api/profile', {\n                        name: this.name,\n                        city: this.city,\n                        age: this.age,\n                        photo: r3.data.photo\n                    });\n                    this.$forceUpdate();\n                    this.addProfile = r4.data;\n                    this.getInfo();\n                } catch (error) {\n                    console.log(error);\n                } \n            },\n            async getInfo() {\n                try {\n                    let response = await axios.get(\"/api/profile\");\n                    this.profile = response.data;\n                    return true;\n                } catch (error) {\n                    console.log(error);\n                }\n            },\n            async deleteProfile(profile) {\n                try {\n                    await axios.delete(\"/api/profile/\" + profile[0]._id);\n                    this.getInfo();\n                    return true;\n                } catch (error) {\n                    console.log(error);\n                }\n            },\n        }\n    }\n</script>\n\n<style scoped>\n    img {\n        margin-top: 20px;\n        width: 150px;\n        height: auto;\n    }\n    h2 {\n        border-top-left-radius: 20px;\n        border-top-right-radius: 20px;\n        border-bottom: 0.5px solid black;\n        background-color: #e1d9ec;\n        padding: 20px;\n        margin: 0;\n    }\n\n    p {\n        margin-top: 25px;\n        margin-bottom: 20px;\n    }\n\n    button {\n        margin-bottom: 20px;\n    }\n\n    .post, .personalForm {\n        text-align: center;\n        margin: 10px;\n        height: auto;\n        border: 0.5px solid black;\n        border-radius: 20px;\n        margin-bottom: 20px;\n    }\n\n    .personalProfile {\n        text-align: center;\n        margin: 12px;\n        height: auto;\n    }\n\n    .personalInfo {\n        margin-top: 0;\n        margin-left: 50px;\n        margin-right: 50px;\n        border: 0.5px solid black;\n        margin-bottom: 20px;\n    }\n\n    .personalEntry {\n        margin-top: 10px;\n    }\n\n    .fileSelect {\n        margin-top: 10px;\n        margin-left: 30px;\n        margin-right: 30px;\n        margin-bottom: 30px;\n    }\n\n    .submit {\n        margin-bottom: 20px;\n    }\n\n    .profilePic {\n        height: 150px;\n        border: 5px solid #e1d9ec;\n        margin-bottom: 0;\n    }\n    \n    .empty {\n        margin: 20px;\n    }\n\n    @media (min-width: 48em) {\n        .post, .personalForm {\n            margin-left: 500px;\n            margin-right: 500px;\n        }\n\n        .personalInfo {\n            margin-left: 673px;\n            margin-right: 673px;\n        }\n\n    }\n   \n</style>"]},"metadata":{},"sourceType":"module"}